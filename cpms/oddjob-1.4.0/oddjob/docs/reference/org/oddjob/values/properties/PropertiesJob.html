<html>
  <head>
    <title>Oddjob Reference - properties</title>
  </head>
  <body>
  [<a href="../../../../index.html">Index</a>]
    <h1>properties</h1>
    <hr/>
Creates properties that can used to configure 
 other jobs.
 <p>
 There are four ways to set properties:
 <ol>
 <li>As Property name/value Pairs in the values property of this job.</li>
 <li>By defining the environment attribute to be the prefix to which all
 environment variables will be appended as properties.</li>
 <li>By using the sets property to provide a number of addition property
 sets which are likely to be a reference to properties defined elsewhere.</li>
 <li>By defining the Input property to be a File/Resource or some other 
 type of input.</li>
 </ol>
 Combinations are possible and the order of evaluation is 
 as above. Oddjob will do it's usual property substitution using previously
 defined property values if required. 
 <p>
 If the substitute property is true, property values will be evaluated 
 for substitution.
 <p>
 The Properties job and <a href='../../../../org/oddjob/values/properties/PropertiesType.html'>properties</a> type are very similar, the difference
 between them is that the job defines properties for Oddjob and the type provides 
 properties for configuring a single job (which could be the
 sets property of the property job).
 <p>
    <hr/>
    <h3>Property Summary</h3>
    <table width='100%' border='1' cellpadding='3' cellspacing='0'>
    <tr>
      <td><a href='#property1'>environment</a></td>
      <td>The prefix for environment variables.</td>
    </tr>
    <tr>
      <td><a href='#property2'>extract</a></td>
      <td>Extract this prefix form property names.</td>
    </tr>
    <tr>
      <td><a href='#property3'>fromXML</a></td>
      <td>If the input for the properties is in XML format.</td>
    </tr>
    <tr>
      <td><a href='#property4'>input</a></td>
      <td>An input source for Properties.</td>
    </tr>
    <tr>
      <td><a href='#property5'>name</a></td>
      <td>A name, can be any text.</td>
    </tr>
    <tr>
      <td><a href='#property6'>override</a></td>
      <td>Properties of this job will override any previously
 set.</td>
    </tr>
    <tr>
      <td><a href='#property7'>prefix</a></td>
      <td>Append this prefix to property names.</td>
    </tr>
    <tr>
      <td><a href='#property8'>properties</a></td>
      <td>Provide all the merged properties defined by this 
 job.</td>
    </tr>
    <tr>
      <td><a href='#property9'>sets</a></td>
      <td>Extra properties to be merged into the overall
 property set.</td>
    </tr>
    <tr>
      <td><a href='#property10'>stop</a></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td><a href='#property11'>substitute</a></td>
      <td>Use substitution for the values of ${} type 
 properties.</td>
    </tr>
    <tr>
      <td><a href='#property12'>system</a></td>
      <td>Set to true to set System properties rather than
 Oddjob properties.</td>
    </tr>
    <tr>
      <td><a href='#property13'>values</a></td>
      <td>Properties defined as key value pairs.</td>
    </tr>
    </table>
    <hr/>
    <h3>Example Summary</h3>
    <table width='100%' border='1' cellpadding='3' cellspacing='0'>
    <tr>
      <td><a href='#example1'>Example 1</a></td>
      <td>Defining and using a property.</td>
    </tr>
    <tr>
      <td><a href='#example2'>Example 2</a></td>
      <td>Defining a property using substitution.</td>
    </tr>
    <tr>
      <td><a href='#example3'>Example 3</a></td>
      <td>Loading properties from a class path resource.</td>
    </tr>
    <tr>
      <td><a href='#example4'>Example 4</a></td>
      <td>Overriding Properties.</td>
    </tr>
    <tr>
      <td><a href='#example5'>Example 5</a></td>
      <td>Capturing Environment Variables.</td>
    </tr>
    </table>
    <hr/>
    <h3>Property Detail</h3>
    <a name='property1'><h4>environment</h4></a>
      <table style='font-size:smaller'>
      <tr><td><i>Configured By</i></td><td>ATTRIBUTE</td></tr>
      <tr><td><i>Access</i></td><td>READ_WRITE</td></tr>
      <tr><td><i>Required</i></td><td>No.</td></tr>
      </table>
      <p>
The prefix for environment variables.
      </p>
    <a name='property2'><h4>extract</h4></a>
      <table style='font-size:smaller'>
      <tr><td><i>Configured By</i></td><td>ATTRIBUTE</td></tr>
      <tr><td><i>Access</i></td><td>READ_WRITE</td></tr>
      <tr><td><i>Required</i></td><td>No.</td></tr>
      </table>
      <p>
Extract this prefix form property names. Filters
 out properties that do not begin with this prefix.
      </p>
    <a name='property3'><h4>fromXML</h4></a>
      <table style='font-size:smaller'>
      <tr><td><i>Configured By</i></td><td>ATTRIBUTE</td></tr>
      <tr><td><i>Access</i></td><td>READ_WRITE</td></tr>
      <tr><td><i>Required</i></td><td>No, default to false.</td></tr>
      </table>
      <p>
If the input for the properties is in XML format.
      </p>
    <a name='property4'><h4>input</h4></a>
      <table style='font-size:smaller'>
      <tr><td><i>Configured By</i></td><td>ELEMENT</td></tr>
      <tr><td><i>Access</i></td><td>WRITE_ONLY</td></tr>
      <tr><td><i>Required</i></td><td>No.</td></tr>
      </table>
      <p>
An input source for Properties.
      </p>
    <a name='property5'><h4>name</h4></a>
      <table style='font-size:smaller'>
      <tr><td><i>Configured By</i></td><td>ATTRIBUTE</td></tr>
      <tr><td><i>Access</i></td><td>READ_WRITE</td></tr>
      <tr><td><i>Required</i></td><td>No.</td></tr>
      </table>
      <p>
A name, can be any text.
      </p>
    <a name='property6'><h4>override</h4></a>
      <table style='font-size:smaller'>
      <tr><td><i>Configured By</i></td><td>ATTRIBUTE</td></tr>
      <tr><td><i>Access</i></td><td>READ_WRITE</td></tr>
      <tr><td><i>Required</i></td><td>No. Default is false.</td></tr>
      </table>
      <p>
Properties of this job will override any previously
 set.
      </p>
    <a name='property7'><h4>prefix</h4></a>
      <table style='font-size:smaller'>
      <tr><td><i>Configured By</i></td><td>ATTRIBUTE</td></tr>
      <tr><td><i>Access</i></td><td>READ_WRITE</td></tr>
      <tr><td><i>Required</i></td><td>No.</td></tr>
      </table>
      <p>
Append this prefix to property names.
      </p>
    <a name='property8'><h4>properties</h4></a>
      <table style='font-size:smaller'>
      <tr><td><i>Access</i></td><td>READ_ONLY</td></tr>
      <tr><td><i>Required</i></td><td>Read Only.</td></tr>
      </table>
      <p>
Provide all the merged properties defined by this 
 job.
      </p>
    <a name='property9'><h4>sets</h4></a>
      <table style='font-size:smaller'>
      <tr><td><i>Configured By</i></td><td>ELEMENT</td></tr>
      <tr><td><i>Access</i></td><td>READ_WRITE</td></tr>
      <tr><td><i>Required</i></td><td>No.</td></tr>
      </table>
      <p>
Extra properties to be merged into the overall
 property set.
      </p>
    <a name='property10'><h4>stop</h4></a>
      <table style='font-size:smaller'>
      <tr><td><i>Access</i></td><td>READ_ONLY</td></tr>
      <tr><td><i>Required</i></td><td>Read Only.</td></tr>
      </table>
      <p>

      </p>
    <a name='property11'><h4>substitute</h4></a>
      <table style='font-size:smaller'>
      <tr><td><i>Configured By</i></td><td>ATTRIBUTE</td></tr>
      <tr><td><i>Access</i></td><td>READ_WRITE</td></tr>
      <tr><td><i>Required</i></td><td>No.</td></tr>
      </table>
      <p>
Use substitution for the values of ${} type 
 properties.
      </p>
    <a name='property12'><h4>system</h4></a>
      <table style='font-size:smaller'>
      <tr><td><i>Configured By</i></td><td>ATTRIBUTE</td></tr>
      <tr><td><i>Access</i></td><td>READ_WRITE</td></tr>
      <tr><td><i>Required</i></td><td>No. Defaults to false</td></tr>
      </table>
      <p>
Set to true to set System properties rather than
 Oddjob properties.
      </p>
    <a name='property13'><h4>values</h4></a>
      <table style='font-size:smaller'>
      <tr><td><i>Configured By</i></td><td>ELEMENT</td></tr>
      <tr><td><i>Access</i></td><td>WRITE_ONLY</td></tr>
      <tr><td><i>Required</i></td><td>No.</td></tr>
      </table>
      <p>
Properties defined as key value pairs.
      </p>
    <hr/>
    <h3>Examples</h3>
    <a name='example1'><h4>Example 1</h4></a>
    <p>
Defining and using a property. Note the escape syntax for property 
 expansion.
 
 <pre class="xml">
&lt;oddjob&gt;
  &lt;job&gt;
   &lt;sequential&gt;
    &lt;jobs&gt;
     &lt;properties&gt;
      &lt;values&gt;
       &lt;value key="fruit.favourite" value="apple"/&gt;
       &lt;value key="snack.favourite" value="${fruit.favourite}"/&gt;
      &lt;/values&gt;
     &lt;/properties&gt;
     &lt;echo id="echo"&gt;$${snack.favourite} is ${snack.favourite}&lt;/echo&gt;
    &lt;/jobs&gt;
   &lt;/sequential&gt;
  &lt;/job&gt;
 &lt;/oddjob&gt;</pre>

    </p>
    <a name='example2'><h4>Example 2</h4></a>
    <p>
Defining a property using substitution. This is the same example as 
 previously but it is the properties job doing the substitution not
 the Oddjob framework. The value of snack.favourite is escaped because we
 want ${fruit.favourite} passed into the properties job. If the property
 was defined in a file it would not need to be escaped like this.
 
 <pre class="xml">
&lt;oddjob&gt;
    &lt;job&gt;
        &lt;sequential&gt;
            &lt;jobs&gt;
                &lt;properties substitute="true"&gt;
                    &lt;values&gt;
                        &lt;value key="fruit.favourite" value="apple"/&gt;
                        &lt;value key="snack.favourite" value="$${fruit.favourite}"/&gt;
                    &lt;/values&gt;
                &lt;/properties&gt;
                &lt;echo id="echo"&gt;$${snack.favourite} is ${snack.favourite}&lt;/echo&gt;
            &lt;/jobs&gt;
        &lt;/sequential&gt;
    &lt;/job&gt;
&lt;/oddjob&gt;</pre>

    </p>
    <a name='example3'><h4>Example 3</h4></a>
    <p>
Loading properties from a class path resource.
 
 <pre class="xml">
&lt;oddjob&gt;
    &lt;job&gt;
        &lt;sequential&gt;
            &lt;jobs&gt;
                &lt;properties&gt;
                    &lt;input&gt;
                        &lt;resource resource="org/oddjob/values/properties/PropertiesJobTest1.properties"/&gt;
                    &lt;/input&gt;
                &lt;/properties&gt;
                &lt;echo id="echo"&gt;${someones.name}&lt;/echo&gt;
            &lt;/jobs&gt;
        &lt;/sequential&gt;
    &lt;/job&gt;
&lt;/oddjob&gt;</pre>

 
 The properties file contains:
 
 <pre>
# properties for test

someones.name = John Smith
someones.name.title = Mr.
someones.address = London
 </pre>

 
 This will display
 <pre>
 John Smith
 </pre>
    </p>
    <a name='example4'><h4>Example 4</h4></a>
    <p>
Overriding Properties. Normally setting a property is first come first
 set. Using the override property on the properties job makes the properties 
 defined in that job take priority.
 
 <pre class="xml">
&lt;oddjob&gt;
  &lt;job&gt;
   &lt;sequential&gt;
    &lt;jobs&gt;
     &lt;properties&gt;
      &lt;values&gt;
       &lt;value key="fruit.favourite" value="apple"/&gt;
      &lt;/values&gt;
     &lt;/properties&gt;
     &lt;echo id="echo1"&gt;$${fruit.favourite} is ${fruit.favourite}&lt;/echo&gt;
     &lt;properties&gt;
      &lt;values&gt;
       &lt;value key="fruit.favourite" value="pear"/&gt;
      &lt;/values&gt;
     &lt;/properties&gt;
     &lt;echo id="echo2"&gt;$${fruit.favourite} is ${fruit.favourite}&lt;/echo&gt;
     &lt;properties override="true"&gt;
      &lt;values&gt;
       &lt;value key="fruit.favourite" value="banana"/&gt;
      &lt;/values&gt;
     &lt;/properties&gt;
     &lt;echo id="echo3"&gt;$${fruit.favourite} is ${fruit.favourite}&lt;/echo&gt;
    &lt;/jobs&gt;
   &lt;/sequential&gt;
  &lt;/job&gt;
 &lt;/oddjob&gt;</pre>

 
 This will display
 <pre>
 ${fuit.favourite} is apple
 ${fuit.favourite} is apple
 ${fuit.favourite} is banana
 </pre>
    </p>
    <a name='example5'><h4>Example 5</h4></a>
    <p>
Capturing Environment Variables. Note that the case sensitivity of 
 environment variables is Operating System dependent. On Windows 
 <code>${env.Path}</code> and <code>${env.path}</code> would also yield the
 same result. On Unix (generally) only <code>${env.PATH}</code> will work.
 
 <pre class="xml">
&lt;oddjob&gt;
  &lt;job&gt;
    &lt;sequential&gt;
      &lt;jobs&gt;
        &lt;properties id="props" environment="env"/&gt;
        &lt;echo id="echo-path"&gt;Path is ${env.PATH}&lt;/echo&gt;
      &lt;/jobs&gt;
    &lt;/sequential&gt;
  &lt;/job&gt;
&lt;/oddjob&gt;</pre>

    </p>
    <hr/>
    <font size='-1' align='center'>(c) Rob Gordon 2005 - 2014</font>
	 </body>
  </html>
