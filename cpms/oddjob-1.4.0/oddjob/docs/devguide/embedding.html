<html>
	<head>
		<title>Dev Guide - Embedding Oddjob</title>
		<style type="text/css">
			@import url(styles.css);
		</style>
	</head>	
	<body>
	
		[<a href="../index.html">Home</a>]
		[<a href="index.html">Index</a>]
		[<a href="first.html">Next</a>]
		
		<h1>Embedding Oddjob</h1>

		<p>Running Oddjob from Code.</p>
		
	<ul>
		<li><a href="#simple">A Simple Example</a></li>
		<li><a href="#lookup">Looking Up Beans</a></li>
		<li><a href="#finally">Cleaning Up</a></li>
	</ul>

	<h4 id="simple">A Simple Example</h4>
	
	<p>It's Hello World of course:</p>

<pre class="code">
        
        String xml = 
            <font color="FF0000"><i>&quot;&lt;oddjob&gt;&quot;</i></font> +
            <font color="FF0000"><i>&quot; &lt;job&gt;&quot;</i></font> +
            <font color="FF0000"><i>&quot;  &lt;echo id='hello-job'&gt;Hello World&lt;/echo&gt;&quot;</i></font> +
            <font color="FF0000"><i>&quot; &lt;/job&gt;&quot;</i></font> +
            <font color="FF0000"><i>&quot;&lt;/oddjob&gt;&quot;</i></font>;
        
        Oddjob oddjob = <font color="0000FF">new</font> Oddjob();
        oddjob.setConfiguration(<font color="0000FF">new</font> XMLConfiguration(<font color="FF0000"><i>&quot;EMBEDDED XML&quot;</i></font>, xml));
    
        oddjob.run();
        
</pre>

 
 	<p>Which is:</p>
 	<ol>
 	 <li>Create an instance of Oddjob.</li>
 	 <li>Give Oddjob some configuration. In this case it's a string of xml,
 	 but it could be a file, or a class path resource.</li>
 	 <li>Run Oddjob.</li>
 	</ol>
 	
 	<p>And that's it.</p>
 	
	<h4 id="lookup">Looking Up Beans</h4>
	
	<p>With three lines of code it's possible to get at all Objects that have
	been registered within Oddjob with their id attribute. Because 
	three lines of code seemed a bit much a utility class 
	<a href="../api/org/oddjob/OddjobLookup">OddjobLookup</a> was created.</p>
	
	<p>We can now get there in one line thus:</p>
	
<pre class="code">
        
        String greeting = <font color="0000FF">new</font> OddjobLookup(oddjob).lookup(<font color="FF0000"><i>&quot;hello-job.text&quot;</i></font>, String.<font color="0000FF">class</font>);
        
</pre>


	<p>By providing the property type, Oddjob will do the conversion for us. There is 
	also a lookup method that doesn't take the second argument and returns
	the raw Object</p>
	
	<h4 id="finally">Cleaning Up</h4>
	
	<p>And when you've finished with Oddjob we mustn't forget to clear those 
	resources:</p>
	
<pre class="code">
        
        oddjob.destroy();       
        
</pre>


	<p>If you don't do this, it's possible that threads will be left running.</p>

		<hr/>

		[<a href="../index.html">Home</a>]
		[<a href="index.html">Index</a>]
		[<a href="first.html">Next</a>]
		
	</body>
</html>
